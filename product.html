<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Detalji Proizvoda | AgroFarm Apoteka</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Jost:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --dark-green: #0d2818; --mid-green: #1a3d28; --light-green: #2a5e3f;
    --gold: #c9a84c; --gold-light: #e8c97a; --gold-pale: #f5e6b8;
    --text-light: #e8f0eb; --text-muted: #8faa98;
    --card-bg: rgba(26, 61, 40, 0.6); --border: rgba(201, 168, 76, 0.25);
  }
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body { font-family: 'Jost', sans-serif; background: var(--dark-green); color: var(--text-light); min-height: 100vh; }
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--dark-green); }
  ::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 3px; }

  /* NAV */
  nav {
    position: sticky; top: 0; z-index: 100;
    background: rgba(13,40,24,0.95); backdrop-filter: blur(20px);
    padding: 16px 60px;
    display: flex; align-items: center; justify-content: space-between;
    border-bottom: 1px solid var(--border);
  }
  .nav-logo { font-family: 'Cormorant Garamond', serif; font-size: 1.8rem; font-weight: 700; color: var(--gold); text-decoration: none; }
  .nav-logo span { color: var(--text-light); font-weight: 400; font-style: italic; }
  .breadcrumb { display: flex; align-items: center; gap: 8px; font-size: 0.78rem; color: var(--text-muted); }
  .breadcrumb a { color: var(--text-muted); text-decoration: none; transition: color 0.3s; }
  .breadcrumb a:hover { color: var(--gold); }
  .breadcrumb span { color: rgba(201,168,76,0.4); }

  /* HERO PRODUCT */
  .product-hero {
    position: relative; overflow: hidden;
    padding: 80px 60px 70px;
    max-width: 1200px; margin: 0 auto;
  }
  .product-hero-grid { display: grid; grid-template-columns: 1fr 1.5fr; gap: 80px; align-items: start; }

  /* LEFT - Visual */
  .product-visual {
    position: sticky; top: 100px;
  }
  .product-visual-frame {
    position: relative;
    background: var(--card-bg);
    border: 1px solid var(--border);
    padding: 60px;
    display: flex; align-items: center; justify-content: center;
    backdrop-filter: blur(20px);
  }
  .product-visual-frame::before {
    content: '';
    position: absolute; inset: 12px;
    border: 1px solid rgba(201,168,76,0.1);
    pointer-events: none;
  }
  .product-emoji-large {
    font-size: 7rem; line-height: 1;
    filter: drop-shadow(0 8px 30px rgba(0,0,0,0.5));
    animation: float 4s ease-in-out infinite;
  }
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  .product-badge-large {
    display: inline-block;
    background: rgba(201,168,76,0.15); border: 1px solid var(--border);
    font-size: 0.6rem; letter-spacing: 2px; text-transform: uppercase;
    color: var(--gold); padding: 4px 12px;
    margin-top: 20px;
    text-align: center;
  }

  /* SPECS QUICK */
  .specs-quick {
    display: grid; grid-template-columns: 1fr 1fr; gap: 1px;
    margin-top: 20px;
    border: 1px solid var(--border);
    overflow: hidden;
  }
  .spec-cell {
    background: var(--card-bg); backdrop-filter: blur(10px);
    padding: 16px 18px;
  }
  .spec-cell label { font-size: 0.6rem; letter-spacing: 2px; text-transform: uppercase; color: var(--gold); display: block; margin-bottom: 5px; }
  .spec-cell value { font-size: 0.85rem; color: var(--text-light); display: block; font-weight: 500; }

  /* RIGHT - Content */
  .product-content { padding-top: 8px; }
  .section-label { font-size: 0.7rem; letter-spacing: 4px; text-transform: uppercase; color: var(--gold); margin-bottom: 14px; display: block; }
  .product-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(2.2rem, 4vw, 3.5rem); font-weight: 700; line-height: 1.1;
    margin-bottom: 10px;
    animation: fadeUp 0.8s ease both;
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .product-cat-tag {
    display: inline-flex; align-items: center; gap: 8px;
    border: 1px solid var(--border); padding: 6px 16px;
    font-size: 0.7rem; letter-spacing: 2px; text-transform: uppercase;
    color: var(--text-muted); margin-bottom: 24px;
  }
  .product-desc {
    font-size: 1rem; color: var(--text-muted); line-height: 1.85;
    margin-bottom: 32px; border-left: 2px solid var(--gold);
    padding-left: 20px;
    animation: fadeUp 0.8s 0.15s ease both;
  }

  /* FEATURES */
  .features-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 10px;
    margin-bottom: 36px;
  }
  .feature-pill {
    display: flex; align-items: flex-start; gap: 10px;
    background: rgba(201,168,76,0.06);
    border: 1px solid rgba(201,168,76,0.15);
    padding: 12px 14px;
    transition: border-color 0.3s;
    animation: fadeUp 0.8s 0.25s ease both;
  }
  .feature-pill:hover { border-color: rgba(201,168,76,0.4); }
  .feature-pill-icon { color: var(--gold); font-size: 0.9rem; flex-shrink: 0; margin-top: 1px; }
  .feature-pill span { font-size: 0.8rem; color: var(--text-light); line-height: 1.5; }

  /* CROPS */
  .crops-section { margin-bottom: 32px; animation: fadeUp 0.8s 0.3s ease both; }
  .crops-section h4 { font-size: 0.7rem; letter-spacing: 3px; text-transform: uppercase; color: var(--gold); margin-bottom: 12px; }
  .crops-tags { display: flex; gap: 8px; flex-wrap: wrap; }
  .crop-tag {
    background: rgba(42,94,63,0.4); border: 1px solid var(--border);
    padding: 5px 14px; font-size: 0.78rem; color: var(--text-muted);
    transition: all 0.3s;
  }
  .crop-tag:hover { border-color: var(--gold); color: var(--gold); background: rgba(201,168,76,0.08); }

  /* SEASON */
  .season-row {
    display: flex; align-items: center; gap: 12px;
    padding: 14px 18px;
    background: rgba(201,168,76,0.06);
    border: 1px solid rgba(201,168,76,0.15);
    margin-bottom: 32px;
    animation: fadeUp 0.8s 0.35s ease both;
  }
  .season-row .icon { font-size: 1.2rem; }
  .season-row span { font-size: 0.82rem; color: var(--text-muted); }
  .season-row strong { color: var(--gold-light); }

  /* CTA BUTTONS */
  .cta-row {
    display: flex; gap: 12px; flex-wrap: wrap;
    animation: fadeUp 0.8s 0.4s ease both;
  }
  .btn-gold {
    background: var(--gold); color: var(--dark-green);
    padding: 14px 32px; font-family: 'Jost', sans-serif;
    font-size: 0.8rem; font-weight: 600; letter-spacing: 2px; text-transform: uppercase;
    border: none; cursor: pointer; text-decoration: none; display: inline-block;
    transition: all 0.3s;
  }
  .btn-gold:hover { background: var(--gold-light); transform: translateY(-2px); box-shadow: 0 10px 30px rgba(201,168,76,0.3); }
  .btn-outline {
    background: transparent; color: var(--text-light);
    padding: 14px 32px; font-family: 'Jost', sans-serif;
    font-size: 0.8rem; font-weight: 500; letter-spacing: 2px; text-transform: uppercase;
    border: 1px solid rgba(255,255,255,0.2); cursor: pointer;
    text-decoration: none; display: inline-block; transition: all 0.3s;
  }
  .btn-outline:hover { border-color: var(--gold); color: var(--gold); }

  /* DIVIDER */
  .gold-divider {
    display: flex; align-items: center; gap: 16px;
    margin: 60px 0 50px;
  }
  .gold-divider-line { flex: 1; height: 1px; background: var(--border); }
  .gold-divider-diamond { width: 8px; height: 8px; background: var(--gold); transform: rotate(45deg); flex-shrink: 0; }

  /* DETAIL SECTIONS */
  .detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 60px; }
  .detail-card {
    background: var(--card-bg); border: 1px solid var(--border);
    padding: 28px 24px; backdrop-filter: blur(10px);
  }
  .detail-card h3 {
    font-size: 0.68rem; letter-spacing: 3px; text-transform: uppercase;
    color: var(--gold); margin-bottom: 20px;
    display: flex; align-items: center; gap: 10px;
  }
  .detail-card h3::after { content: ''; flex: 1; height: 1px; background: var(--border); }
  .detail-row { display: flex; justify-content: space-between; align-items: flex-start; gap: 16px; padding: 12px 0; border-bottom: 1px solid rgba(201,168,76,0.08); }
  .detail-row:last-child { border-bottom: none; }
  .detail-row .lbl { font-size: 0.75rem; color: var(--text-muted); flex-shrink: 0; }
  .detail-row .val { font-size: 0.85rem; color: var(--text-light); text-align: right; font-weight: 500; }

  /* RELATED */
  .related-section { padding: 0 60px 80px; max-width: 1200px; margin: 0 auto; }
  .related-section h2 { font-family: 'Cormorant Garamond', serif; font-size: 2rem; margin-bottom: 30px; }
  .related-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
  .related-card {
    background: var(--card-bg); border: 1px solid var(--border);
    padding: 24px 20px; backdrop-filter: blur(10px);
    text-decoration: none; display: block; color: inherit;
    transition: all 0.35s;
    position: relative; overflow: hidden;
  }
  .related-card::before {
    content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
    transform: scaleX(0); transition: transform 0.4s;
  }
  .related-card::after {
    content: '‚Üí'; position: absolute; bottom: 16px; right: 16px;
    color: var(--gold); opacity: 0; transform: translateX(-6px); transition: all 0.3s;
  }
  .related-card:hover { transform: translateY(-5px); border-color: rgba(201,168,76,0.5); box-shadow: 0 16px 40px rgba(0,0,0,0.4); }
  .related-card:hover::before { transform: scaleX(1); }
  .related-card:hover::after { opacity: 1; transform: translateX(0); }
  .related-emoji { font-size: 2rem; margin-bottom: 12px; display: block; }
  .related-cat { font-size: 0.6rem; letter-spacing: 2px; text-transform: uppercase; color: var(--gold); margin-bottom: 6px; }
  .related-card h4 { font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; color: var(--gold-light); margin-bottom: 5px; }
  .related-card p { font-size: 0.75rem; color: var(--text-muted); line-height: 1.5; padding-right: 20px; }

  /* NOT FOUND */
  .not-found {
    text-align: center; padding: 120px 20px;
  }
  .not-found .big { font-size: 5rem; margin-bottom: 20px; }
  .not-found h2 { font-family: 'Cormorant Garamond', serif; font-size: 2.5rem; margin-bottom: 12px; }
  .not-found p { color: var(--text-muted); margin-bottom: 30px; }

  @media (max-width: 900px) {
    nav { padding: 14px 20px; }
    .product-hero { padding: 50px 20px 50px; }
    .product-hero-grid { grid-template-columns: 1fr; gap: 40px; }
    .product-visual { position: static; }
    .detail-grid { grid-template-columns: 1fr; }
    .related-section { padding: 0 20px 60px; }
    .related-grid { grid-template-columns: 1fr; }
    .features-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<nav>
  <a href="index.html" class="nav-logo">Agro<span>Farm</span></a>
  <div class="breadcrumb">
    <a href="index.html">Poƒçetna</a>
    <span>/</span>
    <a href="products.html">Katalog</a>
    <span>/</span>
    <span id="breadcrumbName" style="color:var(--text-light)">Proizvod</span>
  </div>
</nav>

<div id="app"></div>

<script src="products-data.js"></script>
<script>
function getProductId() {
  const params = new URLSearchParams(window.location.search);
  const id = parseInt(params.get('id'));
  return isNaN(id) ? -1 : id;
}

function renderNotFound() {
  document.getElementById('app').innerHTML = `
    <div class="not-found">
      <div class="big">üå±</div>
      <h2>Proizvod nije pronaƒëen</h2>
      <p>Mo≈æda je uklonjen ili je link netaƒçan.</p>
      <a href="products.html" class="btn-gold">Nazad na katalog</a>
    </div>
  `;
}

function renderProduct(p) {
  document.title = `${p.name} | AgroFarm Apoteka`;
  document.getElementById('breadcrumbName').textContent = p.name;

  const related = (p.relatedIds || [])
    .map(id => ALL_PRODUCTS.find(x => x.id === id))
    .filter(Boolean);

  const catLabels = { herbicid:'Herbicid', fungicid:'Fungicid', insekticid:'Insekticid / Akaricid', djubrivo:'ƒêubrivo', seme:'Seme', ostalo:'Ostalo / Usluga' };

  document.getElementById('app').innerHTML = `
    <!-- HERO -->
    <div class="product-hero">
      <div class="product-hero-grid">

        <!-- LEFT -->
        <div class="product-visual">
          <div class="product-visual-frame">
            <div style="text-align:center;">
              <div class="product-emoji-large">${p.emoji}</div>
              ${p.badge ? `<div class="product-badge-large">${p.badge}</div>` : ''}
            </div>
          </div>
          <div class="specs-quick">
            <div class="spec-cell">
              <label>Doza primene</label>
              <value>${p.dosage}</value>
            </div>
            <div class="spec-cell">
              <label>Karenca</label>
              <value>${p.waiting}</value>
            </div>
            <div class="spec-cell" style="grid-column:1/-1;">
              <label>Aktivna supstanca</label>
              <value>${p.activeSubstance}</value>
            </div>
          </div>
        </div>

        <!-- RIGHT -->
        <div class="product-content">
          <span class="section-label">${catLabels[p.cat] || p.cat}</span>
          <h1 class="product-title">${p.name}</h1>
          <div class="product-cat-tag">
            <span style="color:var(--gold)">‚óè</span>
            ${p.cat.charAt(0).toUpperCase() + p.cat.slice(1)}
          </div>
          <p class="product-desc">${p.fullDesc}</p>

          <div class="features-grid">
            ${p.features.map(f => `
              <div class="feature-pill">
                <span class="feature-pill-icon">‚úì</span>
                <span>${f}</span>
              </div>
            `).join('')}
          </div>

          <div class="crops-section">
            <h4>Preporuƒçeno za useve</h4>
            <div class="crops-tags">
              ${p.crops.map(c => `<span class="crop-tag">${c}</span>`).join('')}
            </div>
          </div>

          <div class="season-row">
            <span class="icon">üìÖ</span>
            <span>Sezona primene: <strong>${p.season}</strong></span>
          </div>

          <div class="cta-row">
            <a href="index.html#contact" class="btn-gold">üìû Upit / Narud≈æbina</a>
            <a href="products.html" class="btn-outline">‚Üê Nazad na katalog</a>
          </div>
        </div>
      </div>

      <!-- DIVIDER -->
      <div class="gold-divider">
        <div class="gold-divider-line"></div>
        <div class="gold-divider-diamond"></div>
        <div class="gold-divider-line"></div>
      </div>

      <!-- DETAIL CARDS -->
      <div class="detail-grid">
        <div class="detail-card">
          <h3>Tehniƒçki podaci</h3>
          <div class="detail-row">
            <span class="lbl">Aktivna supstanca</span>
            <span class="val">${p.activeSubstance}</span>
          </div>
          <div class="detail-row">
            <span class="lbl">Kategorija</span>
            <span class="val">${catLabels[p.cat] || p.cat}</span>
          </div>
          <div class="detail-row">
            <span class="lbl">Doza</span>
            <span class="val">${p.dosage}</span>
          </div>
          <div class="detail-row">
            <span class="lbl">Karenca</span>
            <span class="val">${p.waiting}</span>
          </div>
          <div class="detail-row">
            <span class="lbl">Sezona</span>
            <span class="val">${p.season}</span>
          </div>
        </div>
        <div class="detail-card">
          <h3>Primena i napomene</h3>
          <div class="detail-row" style="flex-direction:column;gap:8px;">
            <span class="lbl">Registrovani usevi</span>
            <span class="val" style="text-align:left;font-size:0.82rem;line-height:1.7;">${p.crops.join(', ')}</span>
          </div>
          <div class="detail-row" style="flex-direction:column;gap:8px;margin-top:8px;">
            <span class="lbl">Karakteristike</span>
            <ul style="list-style:none;display:flex;flex-direction:column;gap:8px;">
              ${p.features.map(f => `<li style="display:flex;gap:8px;align-items:flex-start;font-size:0.8rem;color:var(--text-muted);"><span style="color:var(--gold);flex-shrink:0">‚úì</span>${f}</li>`).join('')}
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- RELATED -->
    ${related.length > 0 ? `
    <div class="related-section">
      <div class="section-label">Mo≈æda vas zanima i</div>
      <h2>Srodni proizvodi</h2>
      <div class="related-grid">
        ${related.map(r => `
          <a class="related-card" href="product.html?id=${r.id}">
            <span class="related-emoji">${r.emoji}</span>
            <div class="related-cat">${catLabels[r.cat] || r.cat}</div>
            <h4>${r.name}</h4>
            <p>${r.desc}</p>
          </a>
        `).join('')}
      </div>
    </div>
    ` : ''}
  `;

  // Animate in
  setTimeout(() => {
    document.querySelectorAll('.feature-pill, .crop-tag, .detail-card, .related-card').forEach((el, i) => {
      el.style.opacity = '0';
      el.style.transform = 'translateY(16px)';
      setTimeout(() => {
        el.style.transition = 'opacity 0.5s ease, transform 0.5s ease, border-color 0.35s, box-shadow 0.35s, transform 0.35s';
        el.style.opacity = '1';
        el.style.transform = 'translateY(0)';
      }, 100 + i * 40);
    });
  }, 50);
}

// INIT
const id = getProductId();
const product = ALL_PRODUCTS.find(p => p.id === id);
if (!product) renderNotFound();
else renderProduct(product);
</script>
</body>
</html>